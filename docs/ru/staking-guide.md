# Гид по стейкингу

## Обзор

Стейкинг в ComputeChain позволяет:
- **Стать валидатором** - производить блоки, получать награды
- **Делегировать валидаторам** - получать пассивный доход
- **Участвовать в консенсусе** - обеспечивать безопасность сети

## Стейкинг (Стать валидатором)

### Требования

- **Минимальный стейк:** 100 CPC
- **Нода:** Необходимо запускать ноду валидатора
- **Uptime:** Минимум 75% для сохранения активности

### Застейкать токены

```bash
./cpc-cli tx stake <СУММА> --from <ИМЯ_КЛЮЧА>
```

**Пример:**

```bash
# Застейкать 500 CPC
./cpc-cli tx stake 500 --from mykey
```

**Что происходит:**
1. Токены блокируются с вашего баланса
2. Создается валидатор с адресом `cpcvalcons1...`
3. Активируется в следующую эпоху (через 100 блоков)

### Вывести стейк

```bash
./cpc-cli tx unstake <СУММА> --from <ИМЯ_КЛЮЧА>
```

**Важно:**
- Можно вывести частично или полностью
- **Штраф при jailing:** 10% сжигается при выводе в состоянии jailed
- Полный вывод → валидатор деактивируется

## Делегирование

### Делегировать валидатору

Получайте пассивные награды, делегируя валидаторам.

```bash
./cpc-cli tx delegate <АДРЕС_ВАЛИДАТОРА> <СУММА> --from <ИМЯ_КЛЮЧА>
```

**Пример:**

```bash
# Делегировать 100 CPC валидатору
./cpc-cli tx delegate cpcvalcons1abc... 100 --from mykey
```

### Проверить делегации

```bash
./cpc-cli query delegations <ВАШ_АДРЕС>
```

**Вывод:**

```
Делегатор: cpc1abc...
Всего делегировано: 100.0 CPC

Валидатор                              Сумма     Комиссия  Имя
------------------------------------------------------------------------------------------
cpcvalcons1xyz...                      60.0      10.0%     Валидатор A
cpcvalcons1def...                      40.0      5.0%      Валидатор B
```

### Отменить делегирование

```bash
./cpc-cli tx undelegate <АДРЕС_ВАЛИДАТОРА> <СУММА> --from <ИМЯ_КЛЮЧА>
```

## Награды

### Как работают награды

**Награда за блок:** 10 CPC за блок (уменьшается вдвое каждые 1М блоков)

**Распределение:**
1. **У валидатора есть делегации:**
   - Валидатор получает комиссию (по умолчанию 10%)
   - Делегаторы делят оставшиеся 90% пропорционально

2. **Нет делегаций:**
   - Валидатор получает 100%

**Пример:**

```
Награда за блок: 10 CPC
Комиссия валидатора: 10%
Всего делегировано: 100 CPC

→ Валидатор: 1 CPC (комиссия)
→ Делегатор A (60 CPC): 5.4 CPC
→ Делегатор B (40 CPC): 3.6 CPC
```

### Проверить награды

```bash
./cpc-cli query rewards <ВАШ_АДРЕС>
```

**Вывод:**

```
Делегатор: cpc1abc...
Всего наград: 125.5 CPC

Эпоха    Награда
------------------
0        25.4 CPC
1        24.8 CPC
2        25.1 CPC
```

### Получение наград

Награды **автоматически зачисляются** на ваш баланс - ручное получение не требуется!

## Комиссия

### Для валидаторов

Установите свою ставку комиссии (0-100%):

```bash
./cpc-cli tx update-validator --commission 0.15 --from mykey
```

**По умолчанию:** 10%
**Рекомендуется:** 5-15%

### Для делегаторов

Выбирайте валидаторов с:
- ✅ Низкой комиссией (больше наград для вас)
- ✅ Высоким uptime (стабильные награды)
- ✅ Хорошей репутацией

## Советы

**Для валидаторов:**
- Поддерживайте uptime >75% для избежания jailing
- Установите разумную комиссию (5-15%)
- Обновите метаданные (имя, сайт) для видимости

**Для делегаторов:**
- Диверсифицируйте между несколькими валидаторами
- Проверяйте uptime и комиссию валидатора
- Регулярно отслеживайте награды

## Следующие шаги

- **[Гид валидатора](validator-guide.md)** - Запуск ноды валидатора, управление жизненным циклом
- **[Справочник CLI](cli-reference.md)** - Полный список команд
- **[Справочник API](api-reference.md)** - Запросы через RPC
